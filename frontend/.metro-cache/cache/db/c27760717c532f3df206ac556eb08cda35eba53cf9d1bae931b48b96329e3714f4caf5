{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"X490zePjq+0IljAc8X0qcBg0iTo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":73,"index":120}}],"key":"vvb+tbs8cGp9hlTxgL5PZCjRz5E=","exportNames":["*"],"imports":1}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":121},"end":{"line":5,"column":69,"index":190}}],"key":"AWXnpGNA5UkH1qQUM7hLv2L9KzI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"shouldPreventRemove\", {\n    enumerable: true,\n    get: function () {\n      return shouldPreventRemove;\n    }\n  });\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var _babelRuntimeHelpersDefineProperty = require(_dependencyMap[0], \"@babel/runtime/helpers/defineProperty\");\n  var _defineProperty = _interopDefault(_babelRuntimeHelpersDefineProperty);\n  var _react = require(_dependencyMap[1], \"react\");\n  var React = _interopNamespace(_react);\n  var _NavigationBuilderContextJs = require(_dependencyMap[2], \"./NavigationBuilderContext.js\");\n  var _NavigationRouteContextJs = require(_dependencyMap[3], \"./NavigationRouteContext.js\");\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = function shouldPreventRemove(emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) {\n    var _action$VISITED_ROUTE;\n    var nextRouteKeys = nextRoutes.map(function (route) {\n      return route.key;\n    });\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(function (route) {\n      return !nextRouteKeys.includes(route.key);\n    }).reverse();\n    var visitedRouteKeys = // @ts-expect-error: add this property to mark that we've already emitted this action\n    (_action$VISITED_ROUTE = action[VISITED_ROUTE_KEYS]) != null ? _action$VISITED_ROUTE : new Set();\n    var beforeRemoveAction = Object.assign({}, action, (0, _defineProperty.default)({}, VISITED_ROUTE_KEYS, visitedRouteKeys));\n    for (var route of removedRoutes) {\n      var _beforeRemoveListener;\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = (_beforeRemoveListener = beforeRemoveListeners[route.key]) == null ? void 0 : _beforeRemoveListener.call(beforeRemoveListeners, beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContextJs.NavigationBuilderContext),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContextJs.NavigationRouteContext);\n    var routeKey = route == null ? void 0 : route.key;\n    React.useEffect(function () {\n      if (routeKey) {\n        return addKeyedListener == null ? void 0 : addKeyedListener('beforeRemove', routeKey, function (action) {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":98,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopDefault"],[7,27,1,13,"e"],[7,28,1,13],[8,4,1,13],[8,11,1,13,"e"],[8,12,1,13],[8,16,1,13,"e"],[8,17,1,13],[8,18,1,13,"__esModule"],[8,28,1,13],[8,31,1,13,"e"],[8,32,1,13],[9,6,1,13,"default"],[9,13,1,13],[9,15,1,13,"e"],[10,4,1,13],[11,2,1,13],[12,2,1,13],[12,11,1,13,"_interopNamespace"],[12,29,1,13,"e"],[12,30,1,13],[13,4,1,13],[13,8,1,13,"e"],[13,9,1,13],[13,13,1,13,"e"],[13,14,1,13],[13,15,1,13,"__esModule"],[13,25,1,13],[13,34,1,13,"e"],[13,35,1,13],[14,4,1,13],[14,8,1,13,"n"],[14,9,1,13],[15,4,1,13],[15,8,1,13,"e"],[15,9,1,13],[15,11,1,13,"Object"],[15,17,1,13],[15,18,1,13,"keys"],[15,22,1,13],[15,23,1,13,"e"],[15,24,1,13],[15,26,1,13,"forEach"],[15,33,1,13],[15,44,1,13,"k"],[15,45,1,13],[16,6,1,13],[16,10,1,13,"d"],[16,11,1,13],[16,14,1,13,"Object"],[16,20,1,13],[16,21,1,13,"getOwnPropertyDescriptor"],[16,45,1,13],[16,46,1,13,"e"],[16,47,1,13],[16,49,1,13,"k"],[16,50,1,13],[17,6,1,13,"Object"],[17,12,1,13],[17,13,1,13,"defineProperty"],[17,27,1,13],[17,28,1,13,"n"],[17,29,1,13],[17,31,1,13,"k"],[17,32,1,13],[17,34,1,13,"d"],[17,35,1,13],[17,36,1,13,"get"],[17,39,1,13],[17,42,1,13,"d"],[17,43,1,13],[18,8,1,13,"enumerable"],[18,18,1,13],[19,8,1,13,"get"],[19,11,1,13],[19,22,1,13,"get"],[19,23,1,13],[20,10,1,13],[20,17,1,13,"e"],[20,18,1,13],[20,19,1,13,"k"],[20,20,1,13],[21,8,1,13],[22,6,1,13],[23,4,1,13],[24,4,1,13,"n"],[24,5,1,13],[24,6,1,13,"default"],[24,13,1,13],[24,16,1,13,"e"],[24,17,1,13],[25,4,1,13],[25,11,1,13,"n"],[25,12,1,13],[26,2,1,13],[27,2,7,0,"Object"],[27,8,7,0],[27,9,7,0,"defineProperty"],[27,23,7,0],[27,24,7,0,"exports"],[27,31,7,0],[28,4,7,0,"enumerable"],[28,14,7,0],[29,4,7,0,"get"],[29,7,7,0],[29,18,7,0,"get"],[29,19,7,0],[30,6,7,0],[30,13,7,0,"shouldPreventRemove"],[30,32,7,0],[31,4,7,0],[32,2,7,0],[33,2,45,0,"exports"],[33,9,45,0],[33,10,45,0,"useOnPreventRemove"],[33,28,45,0],[33,31,45,0,"useOnPreventRemove"],[33,49,45,0],[34,2,63,1],[34,6,63,1,"_babelRuntimeHelpersDefineProperty"],[34,40,63,1],[34,43,63,1,"require"],[34,50,63,1],[34,51,63,1,"_dependencyMap"],[34,65,63,1],[35,2,63,1],[35,6,63,1,"_defineProperty"],[35,21,63,1],[35,24,63,1,"_interopDefault"],[35,39,63,1],[35,40,63,1,"_babelRuntimeHelpersDefineProperty"],[35,74,63,1],[36,2,3,0],[36,6,3,0,"_react"],[36,12,3,0],[36,15,3,0,"require"],[36,22,3,0],[36,23,3,0,"_dependencyMap"],[36,37,3,0],[37,2,3,0],[37,6,3,0,"React"],[37,11,3,0],[37,14,3,0,"_interopNamespace"],[37,31,3,0],[37,32,3,0,"_react"],[37,38,3,0],[38,2,4,0],[38,6,4,0,"_NavigationBuilderContextJs"],[38,33,4,0],[38,36,4,0,"require"],[38,43,4,0],[38,44,4,0,"_dependencyMap"],[38,58,4,0],[39,2,5,0],[39,6,5,0,"_NavigationRouteContextJs"],[39,31,5,0],[39,34,5,0,"require"],[39,41,5,0],[39,42,5,0,"_dependencyMap"],[39,56,5,0],[40,2,6,0],[40,6,6,6,"VISITED_ROUTE_KEYS"],[40,24,6,24],[40,27,6,27,"Symbol"],[40,33,6,33],[40,34,6,34],[40,54,6,54],[40,55,6,55],[41,2,7,7],[41,6,7,13,"shouldPreventRemove"],[41,25,7,32],[41,28,7,35],[41,37,7,13,"shouldPreventRemove"],[41,56,7,32,"shouldPreventRemove"],[41,57,7,36,"emitter"],[41,64,7,43],[41,66,7,45,"beforeRemoveListeners"],[41,87,7,66],[41,89,7,68,"currentRoutes"],[41,102,7,81],[41,104,7,83,"nextRoutes"],[41,114,7,93],[41,116,7,95,"action"],[41,122,7,101],[41,124,7,106],[42,4,7,106],[42,8,7,106,"_action$VISITED_ROUTE"],[42,29,7,106],[43,4,8,2],[43,8,8,8,"nextRouteKeys"],[43,21,8,21],[43,24,8,24,"nextRoutes"],[43,34,8,34],[43,35,8,35,"map"],[43,38,8,38],[43,39,8,39],[43,49,8,39,"route"],[43,54,8,44],[44,6,8,44],[44,13,8,48,"route"],[44,18,8,53],[44,19,8,54,"key"],[44,22,8,57],[45,4,8,57],[45,6,8,58],[47,4,10,2],[48,4,11,2],[48,8,11,8,"removedRoutes"],[48,21,11,21],[48,24,11,24,"currentRoutes"],[48,37,11,37],[48,38,11,38,"filter"],[48,44,11,44],[48,45,11,45],[48,55,11,45,"route"],[48,60,11,50],[49,6,11,50],[49,13,11,54],[49,14,11,55,"nextRouteKeys"],[49,27,11,68],[49,28,11,69,"includes"],[49,36,11,77],[49,37,11,78,"route"],[49,42,11,83],[49,43,11,84,"key"],[49,46,11,87],[49,47,11,88],[50,4,11,88],[50,6,11,89],[50,7,11,90,"reverse"],[50,14,11,97],[50,15,11,98],[50,16,11,99],[51,4,12,2],[51,8,12,8,"visitedRouteKeys"],[51,24,12,24],[51,27,13,2],[52,4,13,2],[52,5,13,2,"_action$VISITED_ROUTE"],[52,26,13,2],[52,29,14,2,"action"],[52,35,14,8],[52,36,14,9,"VISITED_ROUTE_KEYS"],[52,54,14,27],[52,55,14,28],[52,67,14,28,"_action$VISITED_ROUTE"],[52,88,14,28],[52,91,14,32],[52,95,14,36,"Set"],[52,98,14,39],[52,99,14,40],[52,100,14,41],[53,4,15,2],[53,8,15,8,"beforeRemoveAction"],[53,26,15,26],[53,29,15,26,"Object"],[53,35,15,26],[53,36,15,26,"assign"],[53,42,15,26],[53,47,16,7,"action"],[53,53,16,13],[53,59,16,13,"_defineProperty"],[53,74,16,13],[53,75,16,13,"default"],[53,82,16,13],[53,88,17,5,"VISITED_ROUTE_KEYS"],[53,106,17,23],[53,108,17,26,"visitedRouteKeys"],[53,124,17,42],[53,126,18,3],[54,4,19,2],[54,9,19,7],[54,13,19,13,"route"],[54,18,19,18],[54,22,19,22,"removedRoutes"],[54,35,19,35],[54,37,19,37],[55,6,19,37],[55,10,19,37,"_beforeRemoveListener"],[55,31,19,37],[56,6,20,4],[56,10,20,8,"visitedRouteKeys"],[56,26,20,24],[56,27,20,25,"has"],[56,30,20,28],[56,31,20,29,"route"],[56,36,20,34],[56,37,20,35,"key"],[56,40,20,38],[56,41,20,39],[56,43,20,41],[57,8,21,6],[58,8,22,6],[59,6,23,4],[61,6,25,4],[62,6,26,4],[62,10,26,10,"isPrevented"],[62,21,26,21],[62,25,26,21,"_beforeRemoveListener"],[62,46,26,21],[62,49,26,24,"beforeRemoveListeners"],[62,70,26,45],[62,71,26,46,"route"],[62,76,26,51],[62,77,26,52,"key"],[62,80,26,55],[62,81,26,56],[62,102,26,24,"_beforeRemoveListener"],[62,123,26,24],[62,124,26,24,"call"],[62,128,26,24],[62,129,26,24,"beforeRemoveListeners"],[62,150,26,45],[62,152,26,59,"beforeRemoveAction"],[62,170,26,77],[62,171,26,78],[63,6,27,4],[63,10,27,8,"isPrevented"],[63,21,27,19],[63,23,27,21],[64,8,28,6],[64,15,28,13],[64,19,28,17],[65,6,29,4],[66,6,30,4,"visitedRouteKeys"],[66,22,30,20],[66,23,30,21,"add"],[66,26,30,24],[66,27,30,25,"route"],[66,32,30,30],[66,33,30,31,"key"],[66,36,30,34],[66,37,30,35],[67,6,31,4],[67,10,31,10,"event"],[67,15,31,15],[67,18,31,18,"emitter"],[67,25,31,25],[67,26,31,26,"emit"],[67,30,31,30],[67,31,31,31],[68,8,32,6,"type"],[68,12,32,10],[68,14,32,12],[68,28,32,26],[69,8,33,6,"target"],[69,14,33,12],[69,16,33,14,"route"],[69,21,33,19],[69,22,33,20,"key"],[69,25,33,23],[70,8,34,6,"data"],[70,12,34,10],[70,14,34,12],[71,10,35,8,"action"],[71,16,35,14],[71,18,35,16,"beforeRemoveAction"],[72,8,36,6],[72,9,36,7],[73,8,37,6,"canPreventDefault"],[73,25,37,23],[73,27,37,25],[74,6,38,4],[74,7,38,5],[74,8,38,6],[75,6,39,4],[75,10,39,8,"event"],[75,15,39,13],[75,16,39,14,"defaultPrevented"],[75,32,39,30],[75,34,39,32],[76,8,40,6],[76,15,40,13],[76,19,40,17],[77,6,41,4],[78,4,42,2],[79,4,43,2],[79,11,43,9],[79,16,43,14],[80,2,44,0],[80,3,44,1],[81,2,45,7],[81,11,45,16,"useOnPreventRemove"],[81,29,45,34,"useOnPreventRemove"],[81,30,45,34,"_ref"],[81,34,45,34],[81,36,49,3],[82,4,49,3],[82,8,46,2,"getState"],[82,16,46,10],[82,19,46,10,"_ref"],[82,23,46,10],[82,24,46,2,"getState"],[82,32,46,10],[83,6,47,2,"emitter"],[83,13,47,9],[83,16,47,9,"_ref"],[83,20,47,9],[83,21,47,2,"emitter"],[83,28,47,9],[84,6,48,2,"beforeRemoveListeners"],[84,27,48,23],[84,30,48,23,"_ref"],[84,34,48,23],[84,35,48,2,"beforeRemoveListeners"],[84,56,48,23],[85,4,50,2],[85,8,50,2,"_React$useContext"],[85,25,50,2],[85,28,52,6,"React"],[85,33,52,11],[85,34,52,12,"useContext"],[85,44,52,22],[85,45,52,23,"NavigationBuilderContext"],[85,72,52,47],[85,73,52,47,"NavigationBuilderContext"],[85,97,52,47],[85,98,52,48],[86,6,51,4,"addKeyedListener"],[86,22,51,20],[86,25,51,20,"_React$useContext"],[86,42,51,20],[86,43,51,4,"addKeyedListener"],[86,59,51,20],[87,4,53,2],[87,8,53,8,"route"],[87,13,53,13],[87,16,53,16,"React"],[87,21,53,21],[87,22,53,22,"useContext"],[87,32,53,32],[87,33,53,33,"NavigationRouteContext"],[87,58,53,55],[87,59,53,55,"NavigationRouteContext"],[87,81,53,55],[87,82,53,56],[88,4,54,2],[88,8,54,8,"routeKey"],[88,16,54,16],[88,19,54,19,"route"],[88,24,54,24],[88,44,54,19,"route"],[88,49,54,24],[88,50,54,26,"key"],[88,53,54,29],[89,4,55,2,"React"],[89,9,55,7],[89,10,55,8,"useEffect"],[89,19,55,17],[89,20,55,18],[89,32,55,24],[90,6,56,4],[90,10,56,8,"routeKey"],[90,18,56,16],[90,20,56,18],[91,8,57,6],[91,15,57,13,"addKeyedListener"],[91,31,57,29],[91,51,57,13,"addKeyedListener"],[91,67,57,29],[91,68,57,32],[91,82,57,46],[91,84,57,48,"routeKey"],[91,92,57,56],[91,94,57,58],[91,104,57,58,"action"],[91,110,57,64],[91,112,57,68],[92,10,58,8],[92,14,58,14,"state"],[92,19,58,19],[92,22,58,22,"getState"],[92,30,58,30],[92,31,58,31],[92,32,58,32],[93,10,59,8],[93,17,59,15,"shouldPreventRemove"],[93,36,59,34],[93,37,59,35,"emitter"],[93,44,59,42],[93,46,59,44,"beforeRemoveListeners"],[93,67,59,65],[93,69,59,67,"state"],[93,74,59,72],[93,75,59,73,"routes"],[93,81,59,79],[93,83,59,81],[93,85,59,83],[93,87,59,85,"action"],[93,93,59,91],[93,94,59,92],[94,8,60,6],[94,9,60,7],[94,10,60,8],[95,6,61,4],[96,4,62,2],[96,5,62,3],[96,7,62,5],[96,8,62,6,"addKeyedListener"],[96,24,62,22],[96,26,62,24,"beforeRemoveListeners"],[96,47,62,45],[96,49,62,47,"emitter"],[96,56,62,54],[96,58,62,56,"getState"],[96,66,62,64],[96,68,62,66,"routeKey"],[96,76,62,74],[96,77,62,75],[96,78,62,76],[97,2,63,0],[98,0,63,1],[98,3]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCM;uCCC,kBD;6CEG,2CF;CDiC;OIC;kBCU;0DCE;ODG;GDE;CJC"},"hasCjsExports":false},"type":"js/module"}]}