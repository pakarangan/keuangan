{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../addEventListener","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":24,"index":188},"end":{"line":6,"column":54,"index":218}}],"key":"wzhmv3P/qeyjh4vSr75VQmSj1S0=","exportNames":["*"],"imports":1}},{"name":"../useLayoutEffect","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":46,"index":266},"end":{"line":7,"column":75,"index":295}}],"key":"HxIzQAipXTMookQgy6cfIVg92no=","exportNames":["*"],"imports":1}},{"name":"../useStable","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":40,"index":338},"end":{"line":8,"column":63,"index":361}}],"key":"aaDEvWA0GIvZ+A0fiMqOQBx8nOs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\").default;\n  exports.__esModule = true;\n  exports.default = useEvent;\n  var _addEventListener = require(_dependencyMap[1], \"../addEventListener\");\n  var _useLayoutEffect = _interopRequireDefault(require(_dependencyMap[2], \"../useLayoutEffect\"));\n  var _useStable = _interopRequireDefault(require(_dependencyMap[3], \"../useStable\"));\n  /**\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   */\n\n  /**\n   * This can be used with any event type include custom events.\n   *\n   * const click = useEvent('click', options);\n   * useEffect(() => {\n   *   click.setListener(target, onClick);\n   *   return () => click.clear();\n   * }).\n   */\n  function useEvent(eventType, options) {\n    var targetListeners = (0, _useStable.default)(function () {\n      return new Map();\n    });\n    var addListener = (0, _useStable.default)(function () {\n      return function (target, callback) {\n        var removeTargetListener = targetListeners.get(target);\n        if (removeTargetListener != null) {\n          removeTargetListener();\n        }\n        if (callback == null) {\n          targetListeners.delete(target);\n          callback = function callback() {};\n        }\n        var removeEventListener = (0, _addEventListener.addEventListener)(target, eventType, callback, options);\n        targetListeners.set(target, removeEventListener);\n        return removeEventListener;\n      };\n    });\n    (0, _useLayoutEffect.default)(function () {\n      return function () {\n        targetListeners.forEach(function (removeListener) {\n          removeListener();\n        });\n        targetListeners.clear();\n      };\n    }, [targetListeners]);\n    return addListener;\n  }\n  module.exports = exports.default;\n});","lineCount":58,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[4,106,3,85,"default"],[4,113,3,92],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"default"],[6,17,5,15],[6,20,5,18,"useEvent"],[6,28,5,26],[7,2,6,0],[7,6,6,4,"_addEventListener"],[7,23,6,21],[7,26,6,24,"require"],[7,33,6,31],[7,34,6,31,"_dependencyMap"],[7,48,6,31],[7,74,6,53],[7,75,6,54],[8,2,7,0],[8,6,7,4,"_useLayoutEffect"],[8,22,7,20],[8,25,7,23,"_interopRequireDefault"],[8,47,7,45],[8,48,7,46,"require"],[8,55,7,53],[8,56,7,53,"_dependencyMap"],[8,70,7,53],[8,95,7,74],[8,96,7,75],[8,97,7,76],[9,2,8,0],[9,6,8,4,"_useStable"],[9,16,8,14],[9,19,8,17,"_interopRequireDefault"],[9,41,8,39],[9,42,8,40,"require"],[9,49,8,47],[9,50,8,47,"_dependencyMap"],[9,64,8,47],[9,83,8,62],[9,84,8,63],[9,85,8,64],[10,2,9,0],[11,0,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[19,2,18,0],[20,0,19,0],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,0,23,0],[25,0,24,0],[26,0,25,0],[27,0,26,0],[28,2,27,0],[28,11,27,9,"useEvent"],[28,19,27,17,"useEvent"],[28,20,27,18,"eventType"],[28,29,27,27],[28,31,27,29,"options"],[28,38,27,36],[28,40,27,38],[29,4,28,2],[29,8,28,6,"targetListeners"],[29,23,28,21],[29,26,28,24],[29,27,28,25],[29,28,28,26],[29,30,28,28,"_useStable"],[29,40,28,38],[29,41,28,39,"default"],[29,48,28,46],[29,50,28,48],[30,6,28,48],[30,13,28,54],[30,17,28,58,"Map"],[30,20,28,61],[30,21,28,62],[30,22,28,63],[31,4,28,63],[31,6,28,64],[32,4,29,2],[32,8,29,6,"addListener"],[32,19,29,17],[32,22,29,20],[32,23,29,21],[32,24,29,22],[32,26,29,24,"_useStable"],[32,36,29,34],[32,37,29,35,"default"],[32,44,29,42],[32,46,29,44],[32,58,29,50],[33,6,30,4],[33,13,30,11],[33,23,30,12,"target"],[33,29,30,18],[33,31,30,20,"callback"],[33,39,30,28],[33,41,30,33],[34,8,31,6],[34,12,31,10,"removeTargetListener"],[34,32,31,30],[34,35,31,33,"targetListeners"],[34,50,31,48],[34,51,31,49,"get"],[34,54,31,52],[34,55,31,53,"target"],[34,61,31,59],[34,62,31,60],[35,8,32,6],[35,12,32,10,"removeTargetListener"],[35,32,32,30],[35,36,32,34],[35,40,32,38],[35,42,32,40],[36,10,33,8,"removeTargetListener"],[36,30,33,28],[36,31,33,29],[36,32,33,30],[37,8,34,6],[38,8,35,6],[38,12,35,10,"callback"],[38,20,35,18],[38,24,35,22],[38,28,35,26],[38,30,35,28],[39,10,36,8,"targetListeners"],[39,25,36,23],[39,26,36,24,"delete"],[39,32,36,30],[39,33,36,31,"target"],[39,39,36,37],[39,40,36,38],[40,10,37,8,"callback"],[40,18,37,16],[40,21,37,19],[40,30,37,8,"callback"],[40,38,37,16,"callback"],[40,39,37,16],[40,41,37,25],[40,42,37,26],[40,43,37,27],[41,8,38,6],[42,8,39,6],[42,12,39,10,"removeEventListener"],[42,31,39,29],[42,34,39,32],[42,35,39,33],[42,36,39,34],[42,38,39,36,"_addEventListener"],[42,55,39,53],[42,56,39,54,"addEventListener"],[42,72,39,70],[42,74,39,72,"target"],[42,80,39,78],[42,82,39,80,"eventType"],[42,91,39,89],[42,93,39,91,"callback"],[42,101,39,99],[42,103,39,101,"options"],[42,110,39,108],[42,111,39,109],[43,8,40,6,"targetListeners"],[43,23,40,21],[43,24,40,22,"set"],[43,27,40,25],[43,28,40,26,"target"],[43,34,40,32],[43,36,40,34,"removeEventListener"],[43,55,40,53],[43,56,40,54],[44,8,41,6],[44,15,41,13,"removeEventListener"],[44,34,41,32],[45,6,42,4],[45,7,42,5],[46,4,43,2],[46,5,43,3],[46,6,43,4],[47,4,44,2],[47,5,44,3],[47,6,44,4],[47,8,44,6,"_useLayoutEffect"],[47,24,44,22],[47,25,44,23,"default"],[47,32,44,30],[47,34,44,32],[47,46,44,38],[48,6,45,4],[48,13,45,11],[48,25,45,17],[49,8,46,6,"targetListeners"],[49,23,46,21],[49,24,46,22,"forEach"],[49,31,46,29],[49,32,46,30],[49,42,46,30,"removeListener"],[49,56,46,44],[49,58,46,48],[50,10,47,8,"removeListener"],[50,24,47,22],[50,25,47,23],[50,26,47,24],[51,8,48,6],[51,9,48,7],[51,10,48,8],[52,8,49,6,"targetListeners"],[52,23,49,21],[52,24,49,22,"clear"],[52,29,49,27],[52,30,49,28],[52,31,49,29],[53,6,50,4],[53,7,50,5],[54,4,51,2],[54,5,51,3],[54,7,51,5],[54,8,51,6,"targetListeners"],[54,23,51,21],[54,24,51,22],[54,25,51,23],[55,4,52,2],[55,11,52,9,"addListener"],[55,22,52,20],[56,2,53,0],[57,2,54,0,"module"],[57,8,54,6],[57,9,54,7,"exports"],[57,16,54,14],[57,19,54,17,"exports"],[57,26,54,24],[57,27,54,25,"default"],[57,34,54,32],[58,0,54,33],[58,3]],"functionMap":{"names":["<global>","useEvent","<anonymous>","callback","targetListeners.forEach$argument_0"],"mappings":"AAA;AC0B;gDCC,eD;4CCC;mBCQ,QD;GDM;gCCC;8BEE;OFE;GDG;CDE"},"hasCjsExports":true},"type":"js/module"}]}