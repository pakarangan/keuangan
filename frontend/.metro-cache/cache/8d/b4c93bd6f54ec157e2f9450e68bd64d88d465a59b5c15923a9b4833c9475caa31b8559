{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":99,"index":99}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./injection","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":158},"end":{"line":4,"column":67,"index":225}}],"key":"Ri12V5UvvLPFQrEealibULxq4mg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useDOMImperativeHandle = useDOMImperativeHandle;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _injection = require(_dependencyMap[1], \"./injection\");\n  /**\n   * A React `useImperativeHandle` like hook for DOM components.\n   *\n   */\n  function useDOMImperativeHandle(ref, init, deps) {\n    var isTargetWeb =\n    // @ts-expect-error: Added via react-native-webview\n    typeof window.ReactNativeWebView === 'undefined' &&\n    // @ts-expect-error: Added via expo/dom\n    typeof window.$$EXPO_INITIAL_PROPS === 'undefined';\n    var stubHandlerFactory = (0, _react.useCallback)(function () {\n      return {};\n    }, deps != null ? deps : []);\n\n    // This standard useImperativeHandle hook is serving for web\n    (0, _react.useImperativeHandle)(ref, isTargetWeb ? init : stubHandlerFactory, deps);\n\n    // This `globalThis._domRefProxy` is serving for native\n    (0, _react.useEffect)(function () {\n      if (!isTargetWeb) {\n        globalThis._domRefProxy = init();\n        // TODO(@kitten): Type `ReactNativeWebView` and the message data\n        // @ts-expect-error: Added via react-native-webview\n        window.ReactNativeWebView.postMessage(JSON.stringify({\n          type: _injection.REGISTER_DOM_IMPERATIVE_HANDLE_PROPS,\n          data: Object.keys(globalThis._domRefProxy)\n        }));\n      }\n      return function () {\n        if (!isTargetWeb) {\n          globalThis._domRefProxy = undefined;\n        }\n      };\n    }, deps);\n  }\n});","lineCount":45,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"useDOMImperativeHandle"],[7,32,14,0],[7,35,14,0,"useDOMImperativeHandle"],[7,57,14,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,4,0],[9,6,4,0,"_injection"],[9,16,4,0],[9,19,4,0,"require"],[9,26,4,0],[9,27,4,0,"_dependencyMap"],[9,41,4,0],[10,2,10,0],[11,0,11,0],[12,0,12,0],[13,0,13,0],[14,2,14,7],[14,11,14,16,"useDOMImperativeHandle"],[14,33,14,38,"useDOMImperativeHandle"],[14,34,15,2,"ref"],[14,37,15,13],[14,39,16,2,"init"],[14,43,16,15],[14,45,17,2,"deps"],[14,49,17,23],[14,51,18,2],[15,4,19,2],[15,8,19,8,"isTargetWeb"],[15,19,19,19],[16,4,20,4],[17,4,21,4],[17,11,21,11,"window"],[17,17,21,17],[17,18,21,18,"ReactNativeWebView"],[17,36,21,36],[17,41,21,41],[17,52,21,52],[18,4,22,4],[19,4,23,4],[19,11,23,11,"window"],[19,17,23,17],[19,18,23,18,"$$EXPO_INITIAL_PROPS"],[19,38,23,38],[19,43,23,43],[19,54,23,54],[20,4,25,2],[20,8,25,8,"stubHandlerFactory"],[20,26,25,26],[20,29,25,29],[20,33,25,29,"useCallback"],[20,39,25,40],[20,40,25,40,"useCallback"],[20,51,25,40],[20,53,25,41],[21,6,25,41],[21,13,25,48],[21,14,25,49],[21,15,25,50],[22,4,25,50],[22,5,25,56],[22,7,25,58,"deps"],[22,11,25,62],[22,22,25,58,"deps"],[22,26,25,62],[22,29,25,66],[22,31,25,68],[22,32,25,69],[24,4,27,2],[25,4,28,2],[25,8,28,2,"useImperativeHandle"],[25,14,28,21],[25,15,28,21,"useImperativeHandle"],[25,34,28,21],[25,36,28,22,"ref"],[25,39,28,25],[25,41,28,27,"isTargetWeb"],[25,52,28,38],[25,55,28,41,"init"],[25,59,28,45],[25,62,28,48,"stubHandlerFactory"],[25,80,28,66],[25,82,28,68,"deps"],[25,86,28,72],[25,87,28,73],[27,4,30,2],[28,4,31,2],[28,8,31,2,"useEffect"],[28,14,31,11],[28,15,31,11,"useEffect"],[28,24,31,11],[28,26,31,12],[28,38,31,18],[29,6,32,4],[29,10,32,8],[29,11,32,9,"isTargetWeb"],[29,22,32,20],[29,24,32,22],[30,8,33,6,"globalThis"],[30,18,33,16],[30,19,33,17,"_domRefProxy"],[30,31,33,29],[30,34,33,32,"init"],[30,38,33,36],[30,39,33,37],[30,40,33,38],[31,8,34,6],[32,8,35,6],[33,8,36,6,"window"],[33,14,36,12],[33,15,36,13,"ReactNativeWebView"],[33,33,36,31],[33,34,36,32,"postMessage"],[33,45,36,43],[33,46,37,8,"JSON"],[33,50,37,12],[33,51,37,13,"stringify"],[33,60,37,22],[33,61,37,23],[34,10,38,10,"type"],[34,14,38,14],[34,16,38,16,"REGISTER_DOM_IMPERATIVE_HANDLE_PROPS"],[34,26,38,52],[34,27,38,52,"REGISTER_DOM_IMPERATIVE_HANDLE_PROPS"],[34,63,38,52],[35,10,39,10,"data"],[35,14,39,14],[35,16,39,16,"Object"],[35,22,39,22],[35,23,39,23,"keys"],[35,27,39,27],[35,28,39,28,"globalThis"],[35,38,39,38],[35,39,39,39,"_domRefProxy"],[35,51,39,58],[36,8,40,8],[36,9,40,9],[36,10,41,6],[36,11,41,7],[37,6,42,4],[38,6,43,4],[38,13,43,11],[38,25,43,17],[39,8,44,6],[39,12,44,10],[39,13,44,11,"isTargetWeb"],[39,24,44,22],[39,26,44,24],[40,10,45,8,"globalThis"],[40,20,45,18],[40,21,45,19,"_domRefProxy"],[40,33,45,31],[40,36,45,34,"undefined"],[40,45,45,43],[41,8,46,6],[42,6,47,4],[42,7,47,5],[43,4,48,2],[43,5,48,3],[43,7,48,5,"deps"],[43,11,48,9],[43,12,48,10],[44,2,49,0],[45,0,49,1],[45,3]],"functionMap":{"names":["<global>","useDOMImperativeHandle","stubHandlerFactory","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCa;yCCW,eD;YEM;WCY;KDI;GFC;CDC"},"hasCjsExports":false},"type":"js/module"}]}